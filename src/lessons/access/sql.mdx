# SQL 

## Definicja SQL
Zacznijmy od formalnego zdefiniowania czym jest język SQL? Czy jest to język programowania? 
**Język SQL (structured query language)** to język zapytań. Umożliwia on dokonywanie operacji na bazach danych - pozwala na pobieranie i zapisywanie informacji oraz zarządzanie nimi. 

## Podział SQL (dodatkowe)
* DML (data manipulation language)
    * DELETE (usuń)
    * INSERT (wstaw)
    * UPDATE (aktualizuj/zmień)
* DDL (data definition language)
    * CREATE 
    * DROP
    * ALTER


## Dlaczego warto nauczyć się SQL-a?
1. Na części teoretycznej matury z informatyki mogą pojawić się pytania wymagające jego znajomości i są to bardzo łatwe do zdobycia punkty (W dalszej części tej lekcji omówimy przykładowe zadania tego typu ***link***).

2. Zrozumienie SQL pomoże Ci w udoskonaleniu twojej pracy z MS Access a także umożliwi poprawienie zapytań, które nie działają zgodnie z twoimi oczekiwaniami.

3. Relacyjne bazy danych są niezwykle popularne i wykorzystwane w wielu miejscach. Wszystkie bazuja na języku SQL (MS Access, MySQL, PostgreSQL, T-SQL).

4. Jeśli idziesz na studia informatyczne to z pewnością czeka Cię przedmiot obejmujący tematykę baz danych i najzwyczajmniej będzie Ci łatwiej, jeśli będziesz zaznajomiony choć z podstawami tego jezyka.

## SQL a Access
Wszystkie **kwerendy**, **relacje** czy nowe **tabele** jakie towrzymy w Access są tłumaczone na język SQL i wykonywane. W łatwy sposób możemy sprawdzić jak nasze zapytanie będzie tłumaczone przez Access.


<div style={{fontVariant: "small-caps"}}>
widok projektu kwerendy w Access
</div>

![](https://i.imgur.com/76eSnOY.png)

<div style={{fontVariant: "small-caps"}}>
widok SQL
</div>

![](https://i.imgur.com/eZSxoEp.png)

## Składnia SQL 
Zaletą języka SQL jest łatwość jego zrozumienia. Zadania w SQL możemy czytać niemalże jak zwykłe pytania w naturalnym języku angielskim. W tej sekcji zdefinujemy i pokażemy przykłady wykorzystania podstawowych funkcji i selektorów w SQL-u.

### Zadawanie zapytań (potocznie: kwerendy)   

#### Szablon składni
<div style={{color:'rgb(124,252,0)'}}>
SELECT 
</div>
co 
<div style={{color:'rgb(124,252,0)'}}>
[F.AGREGUJĄCE] 
FROM 
</div> 
tabele
<div style={{color:'rgb(124,252,0)'}}>
WHERE 
</div>
 warunki 
<div style={{color:'rgb(124,252,0)'}}>
[DODATKOWE KLAUZULE]
</div>

### Przykłady

https://hackmd.io/5HtM-CM4T-G69Rdg6v7Wmw
(rozpisane tabelki z przykładowej bazy danych)

#### **Chcemy zapytać o:**
#### 0. Całą zawartość tabeli Soki.
```sql
SELECT *
FROM Soki;
```
| Smak | Pojemność [ml] | Cena [zł] |
| -------- | -------- | -------- |
| Jabłkowy     | 330     | 5,00     |
| Pomarańczowy     | 250     |   5,00   |
| Porzeczkowy     | 250     | 4,50     |
| Grejfrutowy     | 330     | 6,00     |
| Kaktusowy     | 125     | 4,50     |

 ##### Wytłumaczenie: operator "*" oznacza "weź wszystko". W tym przypadku weź wszystko z tabeli Soki.
    
#### 1. Smaki soków, które są pojemności 330ml.    
```sql
SELECT Smak
FROM Soki
WHERE Pojemnosc = 330; 
```
| Smak |
| -------- |
| Jablkowy |
| Grejfrutowy |

    
#### 2. Soki które są tańsze niż 5,80zł.
```sql
SELECT Smak
FROM Soki
WHERE Cena < 5,80; 
```
| Smak |
| -------- |
| Jablkowy |
| Pomarańczowy |
| Porzeczkowy |
| Kaktusowy |
                  

#### 3. Soki, które są tańsze niż 2 zł za 100ml 
```sql
SELECT Smaki
FROM Soki
WHERE ((Cena/Pojemnosc)*100) < 2; 
```
| Smak |
| -------- |
| Jablkowy |
| Porzeczkowy |
| Grejfrutowy |
    
#### 4. Cenę za 100ml dla każdego z soków w kolejności niemalejącej
```sql
SELECT Smak, ((Cena/Pojemnosc)*100) AS Cena_za_100_ml
FROM Soki
ORDER BY Cena_za_100_ml ASC;
```
| Smak | Cena_za_100_ml |
| --- | --- |
| Jablkowy | 1,51515151515152 |
| Porzeczkowy	| 1,8 |
| Grejfrutowy	| 1,81818181818182 |
| Pomarańczowy | 2 |
| Kaktusowy | 3,6 |
    
#### 5. Jak w punkcie 4. ale zawsze chcemy widzieć kwote zaokragloną w gorę do pełnych złotówek.
 ```sql
SELECT Smak, CEILING((Cena/Pojemnosc)*100) AS Cena_za_100_ml
FROM Soki
ORDER BY Cena_za_100_ml ASC;
```  
| Smak | Cena_za_100_ml |
| --- | --- |
| Jablkowy | 2 |
| Porzeczkowy	| 2 |
| Grejfrutowy	| 2 |
| Pomaranczowy | 2 |
| Kaktusowy | 4 |
  
##### 6. Zestawienie wszytskich soków lubianych przez studentów.
```sql
SELECT Studenci.Imie, Studenci.Nazwisko, LubianeSoki.Sok
FROM Studenci
JOIN LubianeSoki ON Studenci.Indeks = LubianeSoki.Indeks;
```   
| Imie	| Nazwisko	| Sok |
| ----- | --------  | --- |
| Amelia |	Celujaca | 	Pomaranczowy |
| Amelia |	Celujaca |	Kaktusowy |
| Amelia |	Celujaca |	Grejfrutowy |
| Kazimierz |	Dostateczny	| Jablkowy |
| Jan | Pilny | Jablkowy |
| Jan	| Pilny	| Porzeczkowy |
    

##### 7. Wszystkich studentów, którzy lubią sok jablkowy.
```sql
SELECT Studenci.Imie, Studenci.Nazwisko, LubianeSoki.Sok
FROM Studenci
JOIN LubianeSoki ON Studenci.Indeks = LubianeSoki.Indeks
WHERE LubianeSoki.Sok="Jablkowy";
```
| Imie	| Nazwisko	| Sok |
| ----- | --------  | --- |
| Kazimierz |	Dostateczny	| Jablkowy |
| Jan | Pilny | Jablkowy |

##### 8. Wszystkie bary, w których podają jakiś sok, który lubi Jan Pilny (zadanie ponadprogramowe).
```sql
SELECT PodawaneSoki.Bar
FROM Studenci 
JOIN PodawaneSoki ON Studenci.Indeks = LubianeSoki.Indeks
JOIN Soki ON PodawaneSoki.Sok = Soki.Smak
JOIN LubianeSoki ON Soki.Smak = LubianeSoki.Sok 
WHERE (Studenci.Imie="Jan") AND (Studenci.Nazwisko="Pilny")
GROUP BY PodawaneSoki.Bar;
```  
| Bar |
| --- |
| Piątak |
| Przekręt |
| Witaminka |
    
## PS - gdzie szukać przykładów
Po więcej przykładów zerknijcie do zakąłdki "Bazy danych - Access" - większość zadań, które będę rozwiązywane w accessie będzie dostępnych bowiem również w SQL.
Niezmienne rónież zachęcamy do korzystania ze zbioru maturlanego udostępnianego przez CKE.
    