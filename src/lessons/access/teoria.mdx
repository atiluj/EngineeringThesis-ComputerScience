## 0. Język matematyki vs informatyki

| matematyka | informatyka |
| ---------- | ----------- |
| relacja | tabela |
| krotka | wiersz |
| dziedzina | kolumna |
| atrybut | nazwa kolumny |
| stopień relacji | liczba kolumn tabeli |
| składowa krotki | pole |
<br/>

## 1. Składniki systemu baz danych
1. Schemat bazy danych (struktura BD) - definicje organizacji danych i związków między nimi oraz zasad dostępu.
2. Mechanizmy wprowadzania danych oraz operowania nimi.
3. Reguły integralności - zestaw zasad określających poprawności wykonania każdej operacji na danych.

## 2. Modele baz danych
1. hierarchiczny
2. sieciowy
3. **relacyjny** (obowiązujący na maturze)
4. obiektowy

## 3. Podstawową jednostką organizacji danych w relacyjnej bazy danych jest tabela.

## 4. Jakie wymagania musi spełniać tabela?
* Unikatowa nazwa każdej tabeli.
* Wszystkie wartości w kolumnie muszą być tego samego typu.
* Żaden wiersz w tabeli nie może się powtórzyć.
* Kolejności wierszy w tabeli nie ma znaczenia.
* Musi być zapewniona identyfukacja każdego wiersza.

## 5.
* Klucz główny:
    * jednoznacznie identyfikuje wiersz w tabeli
    * jego wartość musi być unikalna
    * jest to kolumna lub grupa kolumn
    * skróty: KG(klucz główny) lub PK(primary key)
* Klucz obcy:
    * jest kluczem głownym w innej tabeli
    * jest podstawą do budowania związków między tabelami
    * jest to kolumna lub grupa kolumn
    * skrót: FG(foreign key)

## 6. Związki między tabelami (możliwe sposoby zapisu)
* 1-1, 1:1 -- jeden do jednego
* 1-∞, 1:∞, 1-n, 1:n -- jeden do wielu
* ∞-∞, m:n, m-n -- wiele do wielu

(uwaga: raczej unikamy połączen typu wiele do wielu, rozbijamy je na dwa połączenia jeden do wielu poprzez wprowadzenie tabeli pomocniczej)

## 7. Możliwe błędy w modelu relacyjnym
(We wszystkich przykładach będziemy opierać się na bazie danych uczniów w pewnej szkole)
* **redundancja -- powtarzanie się danych**
     Przykład: Wyobrażmy sobie, że w wyniku pewnego błedu w tabeli "Uczniowie" mamy dwa wiersze z tymi samymi wartościami, przedstawiające tą samą osobę - Anna Kowalska 3a nr_dziennika 16 jest w tej bazie wpisana dwukrotnie. Teraz może się okazać, że część ocen Ani jest łączona z jednym a część z drugim rekordem w bazie danych. Może to skutkowac poważnymi problrmami, na przykład średnia Ani może być obliczona niewłaściwie.
* **anomalie:**
    * **modyfikacji** -- wartość występująca w wielu miejscach może ulec zmianie w jednym miejscu, a w innym nie, co powoduje niespójność w bazie danych.
    * **usunięć** -- usunięcie jednej wartości może spowodować utratę innych danych umieszczonych z nią w jednym wierszu.
    * **wstawień** -- konieczność równoczesnego wprowadzania niezależnych danych.


## 8. Postaci normalne
* **Pierwsza postać normalna (1NF)** -- zachodzi wtedy, gdy każda komórka zawiera wartości atomowe. Jej niepodzielność wiąże się z zadeklarowanym typem.

    przykład:

    (przed normalizacja)
    | Płeć | Imię |
    | -- | -- |
    | Męska | Adam, Jan, Piotr |
    | Żeńska | Ola, Asia, Magda |

    (po normalizacji)
    | Płeć | Imię |
    | -- | -- |
    | Męska | Adam |
    | Męska | Jan |
    | Męska | Piotr |
    | Żeńska | Ola |
    | Żeńska | Asia |
    | Żeńska | Magda |


* **Druga postać normalna (2NF)** -- występuje wtedy, gdy posiada własności 1NF oraz każda kolumna niewchodząca w skład klucza głównego zależy od całego klucza głownego.
    przykład:

    (przed normalizacją)
    | Imię | Nazwisko | Płeć | Ulubiony sok | Cena za 250ml soku |
    | -- | -- | -- | -- | -- |
    | Antonii | Kowalski | Męska | jabłkowy | 7zł |
    | Natalia | Janikowska | Żeńska | pomarańczowy | 9zł |
    | Julia | Kwiatkowska | Żeńska | jabłkowy | 7zł |

    (po normalizacji)
    | Imię | Nazwisko | Ulubiony sok | Cena za 250ml soku |
    | -- | -- | -- | -- |
    | Antonii | Kowalski | jabłkowy | 7zł |
    | Natalia | Janikowska | pomarańczowy | 9zł |
    | Julia | Kwiatkowska | jabłkowy | 7zł |

    | Imię | Płeć |
    | -- | -- |
    | Antonii | Męska |
    | Natalia | Żeńska |
    | Julia | Żeńska |


* **Trzecia postać normalna (3NF)** -- występuje, gdy tabela jest w 2NF oraz żadna z kolumn, która nie jest kluczem, nie zależy od innej komórki niekluczowej.
przykład:

(przed normalizacja)
| Imię | Nazwisko | Ulubiony sok | Cena za 250ml soku |
| -- | -- | -- | -- |
| Antonii | Kowalski | jabłkowy | 7zł |
| Natalia | Janikowska | pomarańczowy | 9zł |
| Julia | Kwiatkowska | jabłkowy | 7zł |

(po normalizacji)
| Imię | Nazwisko | Ulubiony sok |
| -- | -- | -- | 
| Antonii | Kowalski | jabłkowy |
| Natalia | Janikowska | pomarańczowy |
| Julia | Kwiatkowska | jabłkowy |

|  Ulubiony sok | Cena za 250ml soku |
| -- | -- |
| jabłkowy | 7zł |
| pomarańczowy | 9zł |



(uwaga: istnieją również 4NF, 5NF i 6NF, ale nie są używane.) 

## 9. Dlaczego warto zrozumieć postaci normalne?
Jest conajmniej kilka powodów, dla których warto poznać i zrozumieć postawy teorii baz danych, w tym postaci normalne.

W punkcie 8. przykładowe tabele były bardzo małe, ale doskonale wiemy, że w codziennym życiu się to raczej nie zdarza. Przechowujmey zazwyczaj ogromne ilości danych. Weźmy na przykład bazę danych, jaką posiada wasza szkoła. Powiedzmy, że w całej placówce mamy około 900 uczniów. Każdy z nich ma **imie, nazwisko, pesel, miejsce zamieszkania, numer legitymacji** dodatkowo każdy uczeń ma conajmniej jednego opiekuna prawnego (zawzyczaj są to rodzice), ich dane takie jak **imię, nazwisko, pesel, numer dowodu**, które szkoła również musi mieć odnotowane. Idąc dalej, każdy uczeń jest przypisany do pewnej **klasy**, ma swój **plan lekcji, wychowawcę** itd. 

Wyobraźmy sobie teraz, że ignorujemy zalecenia związane z postaciami normalnymi i wszystkie powyższe dane trzymamy w jednej tabeli. Będzie to powodowało wielokrotne dupliowanie tych samych informacji, co poza oczwystym marnowaniem miejsca w pamięci może prowadzić również do błędów modelu relacyjnego, o któych mowa w punckie 7.


**Przykład:**
![](https://i.imgur.com/RzlYXaJ.png)
To bardzo uproszczony przykład, zawierający jedyne plan lekcji z jednego dnia, dla jednej klasy, która w dodatku zawiera jedynie dwóch uczniów! Widzimy więc, że stosowanie rozbicia danych na tabele i dbania o prawidłowe relacje między nimi jest niesamowicie istotne. 
Możemy teraz wyobrazić sobię, że nauczycielka "Joanna Popowicka" rozwiodła się i wróciła do panieńskiego nazwiska "Morowska". Musimy więc zmienić jej personalia w każdym wierszu bazy danych, w jakim występowała. Co jeśli przez pomyłkę zapomnimy o jednym z nich? Wówczas wystąpi "anomalia modyfikacji". Widzimy więc, że utrzymywanie tabeli w stanie, jaki przedstawiliśmy powyżej jest tragicznym pomysłem. Wyobraźmy sobie jak skrajnie nie praktyczne i uciążliwe w utrzymywaniu byłyby tego rodzaju bazy danych. Dzięki zastosowaniu normalizacji, nazwisko nauczycielki wystarczyłoby zmienić tylko w jednym miejscu!

