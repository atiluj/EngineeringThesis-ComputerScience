# SQL

## useful links
* https://www.w3schools.com/sql/


## Basic knowledge about SQL
SQL language (structured query language) allows you to perform operations on databases (DB).
It allows us to get and put some information into DB and manage them.
Clause in SQL is a command syntax element that modifies its operation.

### 1. SQL division
* DML (data manipulation language)
    * DELETE
    * INSERT
    * UPDATE
* DDL (data definition language)
    * CREATE 
    * DROP
    * ALTER

### 2. Syntax of SQL queries

# UZUPEŁNIC
    
${}$
**what** ---> table_name **.** column_name
    
### 3. AGGREGATE FUNCTIONS
* COUNT (...)
* SUM (...)
* AVGC (...)
* MIN (...)
* MAX (...)
    
in brackets we write name of column from wich we want to count or sum or ... v
w nawiasie podajemy nazwę kolumny
    
(uwaga: zapis * oznacza wszystko - wszystkie kolumny)

### 4. DODATKOWE KLAUZULE 
* ORDER BY ... DESC/ASC - results sorting:
    * ASC - ascending (in fact >=)
    * DESC - descending (in fact <=)
* GROUP BY ... - it group values based on column that we choose.  It make one record, which represent all group for the records that have exactly the same values in some column (or colums) 
    
* DISTINCT - display/return each record only onece even of normaly it will apear few times
                                    
(note: we use GROUP BY and DISTINCT when we are using aggregation functions)

Example: 
We have a database "shopping" table (we assume that in that example client_name is the identificator - each client_name is uniqe)

| client_name   | date       | value  |
| ------------- | ---------- | ------ |
| Ewa Brown     | 18/07/2022 | 20.67  |
| Julia Roberts | 19/07/2022 | 17.90  |
| Ewa Brown     | 18/07/2022 | 100.99 |
                                    
We write:
**SELECT shopping.client_name
FROM shopping**
                                    
to get the the information abuot our clients. What will be the answer to that query?
| client_name | 
| ----------- |
| Ewa Brown |
| Julia Roberts |
| Ewa Brown |
Is it ok?
It depends. Probably we want that list without repet of any clients. We know that Ewa Brown is our client from first recort and it`s enough. So let`s eliminate repetitions.
                                    
We write:
**SELECT <span style="color:red">DISTINCT </span> shopping.client_name
FROM shopping**
                 
And now our answer is:
| client_name | 
| ----------- |
| Ewa Brown |
| Julia Roberts |
    
We can also write:
**SELECT shopping.client_name
FROM shopping
<span style="color:red">GROUP BY </span> shopping.client_name**
    
And now our answer is 
| client_name | 
| ----------- |
| Ewa Brown |
| Julia Roberts |

We can observe that the answer is exactly the same when we use DISTINCT and GROPU BY, but not always they can be used interchangeably.

First issue is that when we use GROUP BY we have to add to it all columns that we want to have in our SELECT (it`s a shorthand I will add here more specific description how does it works with examples)
    
### 5. JOIN
    
![](https://i.imgur.com/oPJipOJ.png)
(źródło: https://oracledev.pl/oracle-left-join/)
    
### Example:
![](https://i.imgur.com/qYwLDrV.png)

We want to JOIN tables T1 and T2. 
id_t1 is a **private key** in table T1 and **foregin key** in T2. 
id_t2 is the **private key** in T2.
* Way 1:
    **SELECT T1.xyz, T2.abc FROM T1,T2
    WHERE(T1.id_t1=T2.id_t2)**
    
* Way 2:
    **SELECT T1.xyz, T2.abc FROM T1 INNER JOIN T2
    ON(T1.id_t1=T2.id_t2)**
    
(if the name of column based on which we will join oit tables like in example above we can also write USING <column_name> instead of ON <table_1_name>.<column_name> = <table_2_name>.<column_name>, but it1s risky because USING doesn`t work in some types of SQL - for postgreSQL it won`t work (if I remember correctly ;))
    
    
    
### 6. HAVING 
We use having to select some elements/records but only if they meet the condition. We use having when group by and aggregation funcrions are needed
Example:
    https://www.w3schools.com/sql/sql_having.asp):
    ![](https://i.imgur.com/fZQGV1H.png)

    

    

    
    

    
    
    


